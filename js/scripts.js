function clearArrow(){gsap.killTweensOf(arrow_down),gsap.set(arrow_down,{clearProps:"all"})}function straggerAnim(e){if(void 0===e&&(e={}),void 0===e.delay&&(e.delay=.4),void 0===e.elem)return console.log('Err : Send jQuery object "elem"');gsap.fromTo(e.elem,{alpha:0,delay:e.delay,y:"-1rem",duration:.35},{alpha:1,stagger:.4,duration:.35,delay:e.delay,y:"0"})}$.fn.clearAnim=function(e){$(this).removeClass("animate"),gsap.killTweensOf($(this)),void 0===e?gsap.set($(this),{clearProps:"all"}):gsap.set($(this),{clearProps:e})},$.fn.pulseTwices=function(e,a){void 0===e&&(e=.4),void 0===a&&(a=.6),gsap.to($(this),{alpha:.3,yoyo:!0,repeat:3,ease:Linear,duration:a,delay:e})},$.fn.pulse=function(e){void 0===e&&(e={}),void 0===e.delay&&(e.delay=.4),void 0===e.alpha&&(e.alpha=.5),gsap.to($(this),{alpha:e.alpha,yoyo:!0,repeat:void 0===e.repeat?-1:e.repeat%2==0?e.repeat+=1:e.repeat+=2,ease:Power1.easeOut,delay:e.delay})},$.fn.downPulse=function(){gsap.to($(this),{y:"10px",repeat:-1,duration:1,yoyo:!0,ease:Power1.easeInOut})},$.fn.fadeInByOpacity=function(e,a){void 0===e&&(e=.1),void 0===a&&(a=.5),gsap.to($(this),{opacity:1,ease:Power0.easeNone,duration:a,delay:e})},$.fn.fadeOutByOpacity=function(e,a){void 0===e&&(e=.1),void 0===a&&(a=.5),gsap.to($(this),{opacity:0,ease:Power0.easeNone,duration:a,delay:e})},$.fn.fadeInByFlex=function(e){void 0===e&&(e=400),e/=1e3,gsap.fromTo($(this),{display:"none",alpha:0},{display:"flex",alpha:1,direction:e})},$.fn.fadeOutByFlex=function(e){void 0===e&&(e=400),e/=1e3,gsap.to($(this),{duration:e,display:"none"})},$.fn.destroyAnim=function(){gsap.killTweensOf(this),gsap.set(this,{clearProps:"all"})},$.fn.ins=function(e){void 0===e&&(e=0);gsap.fromTo($(this),{left:"-5rem",alpha:0},{left:0,alpha:1,duration:.4,delay:e,ease:Power1.linear}),gsap.to($(this),{alpha:.3,yoyo:!0,repeat:3,duration:.25,ease:Power0.easeOut,delay:e+.5})},$.fn.arrowPulse=function(e){"undefined"==e&&(e=0),gsap.to($(this),{pointerEvents:"auto",duration:.4,delay:e}),gsap.to($(this),{x:".3rem",repeat:-1,yoyo:!0,duration:.4,delay:e})},$.fn.shake=function(e,a){void 0!==e&&null!=e||(e="4");gsap.fromTo($(this),{x:"-"+e},{x:e,duration:.08,yoyo:!0,repeat:7,ease:Power1.linear,onComplete:function(){}})},$.fn.rotate=function(){gsap.to($(this),{rotation:"360",repeat:-1,duration:2,ease:Power0.linear})};
function componentControl(a){for(var n=$("html").find("component"),o=0;o<n.length;o++){var r=$(n[o]),t=r.attr("src");r.hasClass("appear")||(r.addClass("appear"),r.load(t))}a()}
var jsonDoc,urlData="../../json/",path=window.location.pathname;function loadLocalizableResources(e,n){urlData=e,$.getJSON(urlData).done(function(e){var a;a=e,$("body").trigger("jsonReady"),function(e){$.each(e,function(e,n){window[n.key]=replaceServiceCharacters(n.data.value)}),"function"==typeof n&&n()}(a),doLocalize()}).fail(function(e,a,r){n()})}function replaceServiceCharacters(e){return e=replaceAll(e,"[nbsp]","&nbsp;"),e=replaceAll(e,"[","<"),e=replaceAll(e,"]",">"),e=replaceAll(e,"\\n","<br>")}function replaceAll(e,n,a){for(var r=e.indexOf(n);-1!=r;)r=(e=e.replace(n,a)).indexOf(n);return e}function querySt(e){var n=window.location.href;KeysValues=n.split(/[\?&]+/);for(var a=0;a<KeysValues.length;a++){var r=KeysValues[a].split("=");if(r[0]==e)return r[1]}}function doLocalize(){$(("undefined"==typeof containerSelector?"":containerSelector+" ")+"[lcz]").each(function(){$(this).html(window[$(this).attr("lcz")])})}
$(function(){moduleStart.init()});
var navMenu=$("#menu"),menuClose=$("#menu-close"),menuList=$(".menu_list li");function menuControl(){navMenu.on("click",function(){openMenu()}),menuClose.on("click",function(){closeMenu()}),menuList.on("click",function(){var n=$(this).data("goto");closeMenu(),goto(n)})}function openMenu(){$(".menu-overlay").fadeIn(),gsap.fromTo(".menu-overlay .menu",{x:-50},{x:0,duration:.7,onComplete:function(){$(".menu-overlay .menu").clearAnim()}})}function closeMenu(){$(".menu-overlay").offClick(),clearAllTimeout(),gsap.to(".menu-overlay .menu",{x:-50,duration:.7,onComplete:function(){$(".menu-overlay .menu,.menu-overlay .close").clearAnim(),$(".menu-overlay").onClick()}}),$(".menu-overlay").fadeOut()}
var moduleStart={init:function(){moduleStart.preloadImg(),moduleStart.setLang(),moduleStart.setFirstPage(),moduleStart.callMenu(),moduleStart.calculateScreen(),moduleStart.disableLog()},preloadImg:function(){preloadImages("general")},setLang:function(){GetURLParameter("_lang")?(setCookie("lang",GetURLParameter("_lang"),365),lang=GetURLParameter("_lang")):(window.location="?_lang=en-gb",setCookie("lang","en-gb",365),lang="en-gb")},calculateScreen:function(){responsive()},setFirstPage:function(){loadLocalizableResources("data/"+getCookie("lang")+"/base.json",function(){GetURLParameter("_goto")?goto(GetURLParameter("_goto")):goto("tangled")})},callMenu:function(){menuControl()},disableLog:function(){["localhost","127.0.0.1"].includes(location.hostname)||(window.console.log=function(){})}};
function setNavigationButtonsClickListeners(){$("#main-container").on("click","#nextButton,.arrow--next",function(){$("#nextButton").hasClass("clicked")||$("#previousButton").hasClass("clicked")||($("#nextButton").addClass("clicked"),$("#previousButton").addClass("clicked"),setTimeout(function(){$("#nextButton,#previousButton").removeClass("clicked")},1e3),"function"==typeof onNextButtonClicked&&($(this).hasClass("locked")||onNextButtonClicked()))}),$("#main-container").on("click","#previousButton,.arrow--prev",function(){$("#nextButton").hasClass("clicked")||$("#previousButton").hasClass("clicked")||($("#nextButton").addClass("clicked"),$("#previousButton").addClass("clicked"),setTimeout(function(){$("#nextButton,#previousButton").removeClass("clicked")},1e3),"function"==typeof onPreviousButtonClicked&&($(this).hasClass("locked")||onPreviousButtonClicked()))})}function goto(n){loadPage("templates/"+n+".html","js/pages/"+n+".js",n+".json")}function loadPage(n,o,t,e){clearAllTimeout(),clearAllInterval(),$("#content").fadeOut(400,function(){$(this).empty().load(n,function(){componentControl(function(){header.removeClass("absolute"),$("#main-container").attr("class",""),$("#main-container").attr("class",n.slice(10,-5)),arrow_next.removeClass("locked"),loadLocalizableResources("data/"+getCookie("lang")+"/"+t,function(){$.getScript(o,function(){$("#main-container").fadeInByOpacity(),$("#content").fadeIn(500),$("#loading").fadeOut()});var n=$(".page").data("menu");$(".nav__page").hide(),$(".nav__page.name"+n).fadeIn(),handleScrollDown()}),"function"==typeof e&&e()})})})}function inArrayNavMod(){var n=$(".page").attr("id");[].includes(n)?header.hide():header.fadeIn(),[].includes(n)?footer.hide():footer.fadeInByFlex(),[].includes(n)&&showNavigation(arrow_prev,arrow_next)}function handleScrollDown(){var n=$(".page").attr("id");![].includes(n)&&$(window).innerWidth()<$(window).innerHeight()&&(timeouts.push(setTimeout(function(){var n=$(".scroll-inner");n.prop("scrollHeight")-n.innerHeight()>10&&(arrowDown.fadeInByFlex(),arrowDown.downPulse())},500)),$(".scroll-inner").one("scroll",function(){arrowDown.fadeOut(function(){arrowDown.clearAnim()})}),arrowDown.off("click"),arrowDown.one("click",function(){autoScrollToBottom()}))}$(function(){setNavigationButtonsClickListeners()});
function preloadImages(e){if("general"===e)$.preloadImages("images/general/arrow-down.png","images/general/bg.jpg","images/general/castle.png")}
function responsive(){function n(){var n,e=window.innerWidth,i=window.innerHeight;(e>i||e>768)&&e/i>=1.5?n=i/1080*100:(e>i||e>768)&&e/i<1.5?n=i/1080*100*.7:e<=768&&(n=e/1080*100),document.querySelector("html").style.fontSize=n+"%"}n(),$(window).resize(function(){n()})}
var speedCase={slow:2400,fast:800,default:1600};function preventScroll(){$(window).on("mousewheel touchstart",function(){$(".scroll-inner").stop()})}function autoScrollToBottom(o="default"){var e=$(".scroll-inner"),l=e.prop("scrollHeight"),n=e.innerHeight();e.stop().animate({scrollTop:l-n},speedCase[o])}function autoScrollToTop(o="default"){$(".scroll-inner").stop().animate({scrollTop:0},speedCase[o])}function autoScrollHalfScreen(o="default"){var e=$(".scroll-inner"),l=e.prop("scrollHeight"),n=e.innerHeight();e.stop().animate({scrollTop:(l-n)/2},speedCase[o])}$(document).ready(function(){preventScroll()});
function setCookie(e,t,n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);var r="expires="+i.toUTCString();document.cookie=e+"="+t+"; "+r}function getCookie(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var r=n[i];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""}function GetURLParameter(e){for(var t=window.location.search.substring(1).split("&"),n=0;n<t.length;n++){var i=t[n].split("=");if(i[0]==e)return i[1]}}function hideNavigation(e,t){void 0!==e&&e.fadeOut(),void 0!==t&&t.fadeOut()}function showNavigation(e,t){void 0!==e&&e.fadeIn(),void 0!==t&&t.fadeIn()}function clearAllTimeout(){for(var e=0;e<timeouts.length;e++)clearTimeout(timeouts[e]);timeouts=[]}function clearAllInterval(){for(var e=0;e<intervals.length;e++)clearInterval(intervals[e]);intervals=[]}function lockNext(){-1===$.inArray($(".page").attr("id"),lockpage)&&(arrow_next.addClass("locked"),$(".arrow--next").addClass("locked"))}function unlockNext(){-1===$.inArray($(".page").attr("id"),lockpage)&&lockpage.push($(".page").attr("id")),arrow_next.removeClass("locked"),$(".arrow--next").removeClass("locked")}function nextPulse(){$(".arrow--next .arrow__inner").arrowPulse()}function nextStop(){$(".arrow--next .arrow__inner").clearAnim()}function isEmpty(e){return!$.trim(e.html())}function removeBr(e){function t(e){Array.isArray(e)?e.each(function(e,t){$(this).each(function(e,t){$(this).html($(this).html().replace(/<br\s*[\/]?>/gi," "))})}):e.each(function(e,t){$(this).html($(this).html().replace(/<br\s*[\/]?>/gi," "))})}void 0===e.device_version&&(e.device_version="mobile"),("mobile"==e.device_version?isMobile:!isMobile)?t(e.elem):e.elem1&&t(e.elem1)}$.fn.offClick=function(){$(this).css("pointerEvents","none")},$.fn.onClick=function(){$(this).css({pointerEvents:"auto",cursor:"pointer"})},$.preloadImages=function(){for(var e=0;e<arguments.length;e++)$("<img />").attr("src",arguments[e])};
var arrow_prev=$(".arrow--prev"),arrow_next=$(".arrow--next"),header=$("#header"),footer=$("#footer"),arrowDown=$("#arrow-down"),isIOS=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,isMobile=/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(navigator.userAgent),isTablet=/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(navigator.userAgent),isIE=window.navigator.userAgent.indexOf("MSIE ")>0||!!navigator.userAgent.match(/Trident.*rv\:11\./),timeouts=[],lockpage=[],intervals=[];